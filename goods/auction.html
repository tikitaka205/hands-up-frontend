<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Swiper js&css CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
    <!-- fontawesome CDN -->


    <title>ğŸ‘‹ í•¸ì¦ˆì—…</title>

    <!-- Google Font -->
    <link href="" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/elegant-icons.css">
    <link rel="stylesheet" href="/static/css/nice-select.css">
    <link rel="stylesheet" href="/static/css/jquery-ui.min.css">
    <link rel="stylesheet" href="/static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/static/css/slicknav.min.css">
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <!-- timeago -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.6.5/jquery.timeago.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.6.5/locales/jquery.timeago.ko.js"></script>


    <script src="/static/js/base.js"></script>

    <style>
        .pie-timer {
            position: relative;
            display: inline-block;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            transition: 0.3s;
        }

        #center-timer {
            background: #fff;
            display: block;
            position: absolute;
            top: 50%;
            left: 50%;
            width: 190px;
            height: 190px;
            border-radius: 50%;
            text-align: center;
            line-height: 100px;
            font-size: 20px;
            transform: translate(-50%, -50%);
        }
        #participants-count{
            position: absolute;
            top: 60%;
            left: 50%;
            width: 100px;
            height: 30px;
            text-align: center;
            font-size: 20px;
            transform: translate(-50%, -50%);
        }

        .swiper {
            margin-bottom: 15px;
            max-width: 400px;
            max-height: 600px;

            /* height: 300px; */
        }
        .swiper-slide{
            height: 100%;
            text-align: center;
        }

        .progress {

            position: relative;
            height: 15px;
            border-radius: 7.5px;
        }

        .progress::after {
            content: '\A';
            position: absolute;
            border-radius: 0 15px 15px 0;
            /* background-color: var(--c); */
            background: linear-gradient(to right, var(--c1), var(--c2));
            top: 0;
            bottom: 0;
            left: 0;
            width: var(--w);
            /* Specify the width.. */
            -webkit-animation: filler 1.5s ease-in-out;
            -moz-animation: filler 1.5s ease-in-out;
            animation: filler 1.5s ease-in-out;
        }

        .header__menu>ul>li {
            margin: 0 10px;
        }
        #auction-wrap{
            max-height: 650px;
            border-radius: 15px;
            background: radial-gradient(#c692ff, #fde55d);
            box-shadow: 0 4px 8px 1px;
            padding: 15px;
        }
    </style>

</head>

<body style="
        background-color: #cccccc;
    " class="">
    <!-- Page Preloder -->
    <div id="preloder" style="display: none;">
        <div class="loader" style="display: none;"></div>
    </div>

    <!-- Humberger Begin -->
    <div class="humberger__menu__overlay" style="z-index: 995;"></div>
    <div class="humberger__menu__wrapper" style="z-index: 999;">
        <div class="humberger__menu__widget">
            <div class="header__top__right__auth">
                <a href="#"><i class="fa fa-user"></i> Login</a>
            </div>
        </div>
        <div id="mobile-menu-wrap">
            <div class="slicknav_menu">
                <nav class="slicknav_nav slicknav_hidden" aria-hidden="true" role="menu" style="display: none;">
                    <ul>
                        <li class="active"><a href="/index.html" role="menuitem">í™ˆ</a></li>
                        <li><a href="/goods/index.html">ê²½ë§¤ì¥</a></li>
                        <!-- <li><a href="#">Pages</a>
                                <ul class="header__menu__dropdown">
                                    <li><a href="/shop-details.html">Shop Details</a></li>
                                    <li><a href="/shoping-cart.html">Shoping Cart</a></li>
                                    <li><a href="/checkout.html">Check Out</a></li>
                                    <li><a href="/blog-details.html">Blog Details</a></li>
                                </ul>
                            </li> -->
                        <li><a href="/blog/blog.html">ê²Œì‹œíŒ</a></li>
                        <li><a href="/contact.html">Contact & Feedback</a></li>
                        <li class="p-2">
                            <input type="text" class="form-control mb-1" placeholder="What do yo u need?">
                            <button style="width: 100%;" type="submit" class="btn btn-primary ">SEARCH</button>

                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <!-- <div class="header__top__right__social">
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-linkedin"></i></a>
                <a href="#"><i class="fa fa-pinterest-p"></i></a>
            </div>
            <div class="humberger__menu__contact">
                <ul>
                    <li><i class="fa fa-envelope"></i> hello@colorlib.com</li>
                    <li>Free Shipping for all Order of $99</li>
                </ul>
            </div> -->
    </div>
    <!-- Humberger End -->

    <!-- Header Section Begin -->
    <header class="header" style="
        background: linear-gradient(45deg, #ffd567, #c24aff) !important;
        position: sticky;
        z-index: 99;
        width: 100%;
        color: white;
    ">

        <div class="container">
            <div class="row">
                <div class="col-lg-2">
                    <div class="header__logo">
                        <h1 style="font-size: 30px;font-weight: 800;color: white; padding-top: 10px;">ğŸ‘‹ í•¸ì¦ˆì—…</h1>
                    </div>
                </div>
                <div class="col-lg-8" style="padding: 0;">
                    <nav class="header__menu">
                        <ul style="color: white;">
                            <li><a href="/goods/index.html">ê²½ë§¤</a>
                                <!-- <ul class="header__menu__dropdown">
                                        <li><a href="/shop-details.html">Shop Details</a></li>
                                        <li><a href="/shoping-cart.html">Shoping Cart</a></li>
                                        <li><a href="/checkout.html">Check Out</a></li>
                                        <li><a href="/blog-details.html">Blog Details</a></li>
                                    </ul> -->
                            </li>
                            <li><a href="/blog/blog.html">ê²Œì‹œíŒ</a></li>
                            <li><a href="/contact.html">Contact & Feedback</a></li>
                            <li style="margin-right: 0;">
                                <input type="text" class="form-control" placeholder="What do yo u need?">
                            </li>
                            <li style="margin: 0;" class="btn btn-primary">
                                <i class="fas fa-search"></i>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-2">

                    <div class="header__cart">
                        <ul>
                            <li><a href="#"><i class="fa fa-user"></i></a></li>
                            <li><a href="#"><i class="fas fa-bell"></i> <span>3</span></a></li>
                            <i class="fas fa-heart" style="color: black;"></i>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="humberger__open">
                <i class="fa fa-bars"></i>
            </div>
        </div>
    </header>
    <!-- Header Section End -->


    <div class="whole-wrap container "
        style="margin : 0 auto; padding-top: 20px;">
        <div class="row">
            <div class="col-lg-5" style="padding: 0 10px;">
                <div>
                    <!-- ìƒí’ˆ ì‚¬ì§„   --> 
                    <div id="goods-image-wrap">
                        <div class="swiper">
                            <!-- Additional required wrapper -->
                            <div class="swiper-wrapper" id="swiper-wrapper">
                              <!-- Slides -->
                              <div class="swiper-slide">Slide 1</div>
                              <div class="swiper-slide">Slide 2</div>
                              <div class="swiper-slide">Slide 3</div>
                              <div class="swiper-slide">Slide 3</div>
                              <div class="swiper-slide">Slide 3</div>
                            </div>
                            <!-- If we need pagination -->
                            <div class="swiper-pagination"></div>
                          
                            <!-- If we need navigation buttons -->
                            <div class="swiper-button-prev"></div>
                            <div class="swiper-button-next"></div>
                          
                            <!-- If we need scrollbar -->
                            <div class="swiper-scrollbar"></div>
                          </div>
                    </div>
                    <!-- ì‚¬ìš©ì ì •ë³´ ì„¹ì…˜ -->
                    <div id="seller-info-wrap"></div>
                    <!-- ì‚¬ìš©ì ì˜ˆìƒ ê°€ê²© ì„¹ì…˜ -->
                    <div id="predict-price-wrap"></div>
                    <!-- ìƒí’ˆ ì •ë³´ ì„¹ì…˜ -->
                    <div id="goods-info-wrap"></div>    
                </div>
                
            </div>

            <div class="col-lg-3" id="whole-auction-wrap" style="padding: 0 10px;">
                <div id="auction-wrap" style="height: 100%;">
                    <!-- ë‚¨ì€ ì‹œê°„ íƒ€ì´ë¨¸ -->
                    <div class="text-center">
                        <div class="pie-timer" style="box-shadow: 0 2px 5px 0px;">
                            <div id="center-timer"></div>
                            <div id="participants-count"></div>
                        </div>
                    </div>
            
                    <!-- í˜„ì¬ê°€(ìµœê³ ê°€) -->
                    <div id="high-price">
            
                    </div>
                    <input class="form-control mb-2" id="chat-money-input" type="text" placeholder="ì…ì°°ê°€ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”!" />
                    <input class="btn btn-warning form-control" style="box-shadow: 0 1px 2px 0px;" id="chat-message-submit"
                        type="button" onclick="sendMoney()" value="ì…ì°°" />
                </div>
            </div>
            <div class="col-lg-4">
                <div class="p-3" style="height : 600px;overflow: scroll; background-color: white; border-radius: 5px;" id="chat-wrap">
                    <div class="" id="chat-log">
                        <div id="chat" class="">
                        </div>
                    </div>
                </div>
                <div class="row" style="padding: 10px 0 0 15px;">
                    <input class="form-control col-9" id="chat-message-input" type="text" />
                    <div class="col-3">
                        <input class="btn btn-primary" id="chat-message-submit" type="button" onclick="sendMessage()" value="ë³´ë‚´ê¸°" />
                    </div>
            
                </div>
            
            </div>
            </div>
        
    </div>
    <!-- <button onclick="auctionView(15)"></button>
    <button onclick="auctionView(1)"></button>
    <button onclick="auctionView(3)"></button> -->

    <script src="/static/js/auction.js"></script>
    <script>
        // function auctionView(goodsId){
        //     HANDSUP['goods_id'] = goodsId
        //     localStorage.setItem('handsup', JSON.stringify(HANDSUP));
            
        // }
        // // ë¡œë“œì‹œ ìµœê·¼ ë“¤ì–´ê°„ ê²½ë§¤ urlì—ì„œ idë¥¼ ì¶”ì¶œí•˜ê±°ë‚˜ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì°¾ì•„ì„œ ì €ì¥
        // // í”„ë¡ íŠ¸ ë°±ì—”ë“œë¥¼ ë‚˜ëˆˆë‹¤ë©´ ë¬¼í’ˆì˜ urlì„ ê³µìœ  ëª»í•˜ì§€ ì•Šë‚˜?
        // // ìŠ¤í† ë¦¬ì§€ì— ì „ì— ë³´ëƒˆë˜ ë‚´ìš© ì €ì¥í•˜ê³  ì¼ì¹˜ì„± íŒë‹¨í›„ ê°œìˆ˜ ì„¸ê³  íŒë‹¨
        // var highPrice = HANDSUP['high_price']; // ìµœê³ ê°€ê°€ ì•„ì§ ì—†ë‹¤ë©´ ? ì§€ì •í•œ ìµœì €ê°€ê°€ ë  ê²ƒ => ì‚¼í•­ë¬¸ì 
        // var goodsId = HANDSUP['goods_id'];
        // var backUrl = '127.0.0.1:8000'
        // var backEndUrl = 'http://127.0.0.1:8000'
        // var token = localStorage.getItem('access')



        // async function goodsInfoView() {
        //     let data = await goodsInfoApi()
        //     let seller = data['seller']
        //     let images = data['goodsimage_set']
        //     let nowPrice = highPrice === 0 ? data['start_price'] : highPrice
        //     let ratingScore = data['seller']['rating_score']
        //     let ratingColor = [['#686868', 'black'], ['#a0cfff', 'blue'], ['#ffe452', '#ff9623'], ['#ff6d92', '#e981ff']][parseInt(ratingScore / 25)]
        //     console.log(data)
        //     console.log(nowPrice, ratingScore, ratingColor)

        //     // ì‚¬ì§„ ì„¹ì…˜
        //     var temp = ``
        //     for (var i = 0; i < data['images'].length; i++) {
        //         temp += `
        //         <div class="swiper-slide">
        //             <img style="box-shadow: 0 2px 5px 0px; border-radius:10px" src="${backEndUrl}${data['images'][i]['image']}" alt="ìƒí’ˆì´ë¯¸ì§€"/>
        //         </div>
        //     `
        //     }
        //     document.getElementById('swiper-wrapper').innerHTML = temp

        //     const swiper = new Swiper('.swiper', {
        //         // Optional parameters
        //         // direction: 'vertical',
        //         // loop: true,

        //         // If we need pagination
        //         pagination: {
        //             // el: '.swiper-pagination',
        //         },

        //         // Navigation arrows
        //         navigation: {
        //             nextEl: '.swiper-button-next',
        //             prevEl: '.swiper-button-prev',
        //         },

        //         // And if we need scrollbar
        //         scrollbar: {
        //             el: '.swiper-scrollbar',
        //         },
        //     });
        //     // ì‚¬ìš©ì ì •ë³´ ì„¹ì…˜
        //     var temp = `
        //         <div class = "p-3 card mb-3" style= "background-color : #2c2c2c; border-radius : 10px; color : white;">
        //             <div class = "row" onclick="console.log('í”„ë¡œí•„ë¡œì´ë™í•˜ì¥')">
        //                 <div class = "col-2">
        //                     <img style="border-radius:50%;" src="${seller['profile_image']}" alt="img">
        //                 </div>
        //                 <div class = "col-4">
        //                     <b>${seller["username"]}</b>
        //                 </div>
        //                 <div class = "col-6 text-end">
        //                     <div class="progress" max=100 style="--w:${ratingScore}%; --c1:${ratingColor[0]};--c2:${ratingColor[1]};"></div>
        //                     <span class='text-secondary small'>ë§¤ë„ˆì ìˆ˜</span> ${seller["rating_score"]}
                            
        //                 </div>
        //             </div>
        //         </div>
        //     `
        //     document.getElementById('seller-info-wrap').innerHTML = temp
        //     // íŒë§¤ì ì˜ˆìƒ ê°€ì¹˜ ì„¹ì…˜
        //     var temp = `
        //         <div class = "p-3 card mb-3" style="background-color : #2c2c2c; color:white; border-radius:10px;">
        //             <div class ="row">
        //                 <span class="col-6" style="font-weight : 600;">
        //                     íŒë§¤ì ì˜ˆìƒ ê°€ì¹˜ :                        
        //                 </span>
        //                 <span class="text-end col-6" style="font-weight : 700">
        //                     ${data['predict_price']} ì› 
        //                 </span>
        //             </div>
        //         </div>
        //     `
        //     document.getElementById('predict-price-wrap').innerHTML = temp

        //     // ë¬¼ê±´ ì •ë³´ ì„¹ì…˜
        //     var time = data["created_at"].slice(undefined,-7)
        //     var temp = `
        //         <div class = "p-3 card mb-3" style="background-color : #2c2c2c; color:white; border-radius:10px;">
        //             <h3 style="color:white; font-weight:600;">${data['title']}</h3>
                                    
        //             <div class="small">ì¹´í…Œê³ ë¦¬ : ${data['category']}, <span style="font-size:14px"><time class="timeago" datetime="${time}"></time></span></div>
        //             <div class="card-body" style="font-weight:600">${data['content']}</div>
        //         </div>
        //     `
        //     document.getElementById('goods-info-wrap').innerHTML = temp
        //     $("time.timeago").timeago();
            
        //     // íƒ€ì´ë¨¸ ì‹œì‘ ì „ => ì‹œì‘ ì¼ì‹œ ë³´ì—¬ì£¼ê¸°
        //     // ì‹œì‘ì¤‘ => íƒ€ì´ë¨¸ ë³´ì—¬ì£¼ê¸°
        //     // ì¢…ë£Œ => ê²½ë§¤ ì¢…ë£Œ í‘œì‹œ
        //     await goodsStatusView(data)

            
        // }


        // async function goodsInfoApi() {
        //     const response = await fetch(`${backEndUrl}/goods/${goodsId}/`, {
        //         method: 'GET',
        //         headers: {
        //             'Content-Type': 'application/json',
        //             'Authorization': 'Bearer ' + token,
        //         }
        //     })
        //     response_json = await response.json()
        //     if (response.status == 200) {
        //         HANDSUP['high_price'] = response_json['high_price'] === 0? response_json['start_price'] : response_json['high_price']
        //         HANDSUP['seller_id'] = response_json['seller']['id']
        //         HANDSUP['buyer_id'] = response_json['buyer']?.id
        //         localStorage.setItem('handsup', JSON.stringify(HANDSUP))
        //         return response_json
        //     }
        //     else if (response.status == 400) {
        //         console.log(response_json)
        //     }
        // }

        // async function goodsStatusView(data) {
        //     // íƒ€ì´ë¨¸ ë§Œë“œëŠ” ë¡œì§ - ì‹œì‘ì‹œê°„ ì‹œ:ë¶„ê³¼ ì‹œì‘ë‚ ì§œ yyyy-mm-ddë¥¼ ì´ìš©í•˜ì—¬ Dateë¥¼ ë§Œë“¦
        //     // 20ë¶„ - (í˜„ì¬ ì‹œê° - ì‹œì‘ ì‹œê°)
        //     let status = data['status']
        //     let startDate = data['start_date']
        //     let startTime = `${data['start_time']}:00`
        //     let time2 = parseInt((DATE.getTime() - new Date(`${startDate} ${startTime}`).getTime()) / 1000)
        //     let totalSecond = 20 * 60 - time2
        //     if (status === true) {
        //         await startTimer(totalSecond)

        //         if (data['buyer'] !== null) {
        //             let buyer = data['buyer']
        //             //ì‚¬ì§„ìœ¼ë¡œ í•´ì•¼í•˜ëŠ”ì§€ ì˜ë¬¸
        //             document.getElementById('high-price').innerHTML = `
        //             <div class="p-3 text-center mb-3">
        //                 <div class="mb-3 card p-2" style="box-shadow: 0 2px 5px 0px;">
        //                     <div>
        //                         <i class="fas fa-won-sign" style="color:green;"></i>
        //                         í˜„ì¬ ìµœê³ ê°€
        //                     </div>
        //                     <div style = "font-wetight : 600">
        //                         <b style = "font-size:22px">${data['high_price']}</b> <span class = "text-secondary">ì›</span>
        //                     </div>
        //                 </div>
        //                 <div class = "card p-2 mb-3" style="box-shadow: 0 2px 5px 0px;">
        //                     <div><i class="fas fa-crown" style="color:salmon;"></i> í˜„ì¬ ì˜¤ë„ˆ<div>
        //                     <div class="" style="font-size:25px; font-weight : 700;" onclick="console.log('í”„ë¡œí•„ë¡œ ê°€ì¥')">
        //                         ${buyer['username']}
        //                     </div>
        //                 </div>
        //             </div>
        //             `
        //         } else {
        //             document.getElementById('high-price').innerHTML = `
        //             <div class="p-3 text-center card mb-3" style="box-shadow: 0 2px 5px 0px;">
        //                 <div style="font-weight : 500">ê³¼ì—° ì²« ë²ˆì§¸ ì˜¤ë„ˆëŠ”?</div>
        //                 <span style="font-weight:600;">ì‹œì‘ê°€ <span style="font-size:24px; font-weight : 700;">${data['start_price']}</span> ì›</span>
        //             </div>
        //             `
        //         }
        //     } else if (status === false) { // ê°€ë¦¼ë§‰ ë³´ì´ê²Œ í•˜ê³  ë‚™ì°°ìì´ë¦„ ê°€ê²© ë³´ì´ê²Œ í•˜ê¸°?
        //         var buyer = data['buyer'] === null? 'ë‚™ì°°ìê°€ ì—†ìŠµë‹ˆë‹¤.' : data['buyer']['username']
        //         $('#auction-wrap').empty()
        //         var temp = `
        //         <div id="auction-before-message" class = "text-center">
        //             <div style="font-size: 20px;" font-weight: 600;>ë‚™ì°° ë°›ì€ ì£¼ì¸ê³µ!</div>
        //             <div style="font-size : 25px; font-weight:600;">${buyer}</div>
        //             <div  style='padding:15px 44% 0; font-size: 25px; font-weight : 500;'>ê²½ë§¤ê°€ ì¢…ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
        //         </div>
        //         `
        //         $('#auction-wrap').html(temp)
        //         $('#chat-message-input').attr('disabled', true)
        //         $('#chat-message-input').attr('placeholder', 'ê²½ë§¤ê°€ ì¢…ë£Œë˜ì–´ ì±„íŒ…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.')
        //         $('#chat-message-submit').attr('disabled', true)

        //     } else { // ì‹œì‘ ì „ íƒ€ì´ë¨¸ëŠ” 20ë¶„ ì„¸íŒ…í•˜ê³  ê°€ë¦¼ë§‰ ë³´ì´ê²Œ í•˜ê¸° ì•„ì§ ì‹œì‘ ì „ì´ë¼ ì•Œë¦¬ê¸°
        //         $('#auction-wrap').empty()
        //         var temp = `
        //         <div id="auction-before-message" class = "text-center">
        //             <div style="font-size: 20px;" font-weight: 600;>ê²½ë§¤ ì‹œì‘ ì‹œê°„</div>
        //             <div style="font-size : 25px; font-weight:600;">${data['start_date']} ${data['start_time']}:00</div>
        //             <div  style='padding:15px 44% 0; color:white; font-size: 25px; font-weight : 500;'>ì˜¤ë„ˆ ë  ì¤€ë¹„, ë˜ì…¨ë‚˜ìš” ??</div>
        //         </div>
                
        //         `
        //         $('#auction-wrap').html(temp)
        //     }
        // }

        // async function startTimer(time) {
        //     console.log('dd')
        //     let totalSecond = time

        //     let x = setInterval(function () {
        //         let min = parseInt(totalSecond / 60)
        //         let sec = totalSecond % 60
        //         let perTime = totalSecond / (60 * 20) * 100
        //         let percolor = perTime <= 10 ? 'red' : ['yellow', 'blue', 'purple'][parseInt(perTime / 40)]
        //         console.log(percolor)
        //         document.getElementById('center-timer').innerHTML = min + "ë¶„" + sec + "ì´ˆ";
        //         $('.pie-timer').css({
        //             "background": "conic-gradient(" + percolor + " 0% " + perTime + "%, #ffffff " + perTime + "% 100%)"
        //         });
        //         totalSecond--;

        //         if (totalSecond < 0) {
        //             clearInterval(x);
        //             document.getElementById('center-timer').innerHTML = '<i class="fas fa-gavel" style="color:red;"></i> ê²½ë§¤ ì¢…ë£Œ';
        //         }
        //     }, 1000);
        // }

        // goodsInfoView()

        // let chatSocket = new WebSocket(
        //     `ws://${backUrl}/auction/${goodsId}/?token=${localStorage.getItem(['access'])}`
        // );

        // chatSocket.onopen = (e) => {
        //     console.log('connect')
        // }

        // chatSocket.onmessage = function (e) {
        //     var data = JSON.parse(e.data);
        //     var message = data['message'];
        //     var responseType = data['response_type'];
        //     console.log(responseType)
        //     var element = document.getElementById('chat-wrap');
        //     var isEnd = element.scrollHeight <= element.scrollTop + element.clientHeight + 3;

        //     if (responseType === 'alert'){
        //         alert(data['message'])
        //         return
        //     }

        //     if (responseType === 'bid') {
        //         var highPrice = data['high_price']
        //         HANDSUP['high_price'] = highPrice
        //         HANDSUP['buyer_id'] = data['sender']

        //         localStorage.setItem('handsup', JSON.stringify(HANDSUP));


        //         var temp = `
        //             <div class="p-3 text-center mb-3">
        //                 <div class="mb-3 card p-2">
        //                     <div>
        //                         <i class="fas fa-won-sign" style="color:green;"></i>
        //                         í˜„ì¬ ìµœê³ ê°€
        //                     </div>
        //                     <div style = "font-wetight : 600">
        //                         <b style = "font-size:22px">${data['high_price']}</b> <span class = "text-secondary">ì›</span>
        //                     </div>
        //                 </div>
        //                 <div class = "card p-2 mb-3">
        //                     <div><i class="fas fa-crown" style="color:salmon;"></i> í˜„ì¬ ì˜¤ë„ˆ<div>
        //                     <div class="" style="font-size:25px;" onclick="console.log('í”„ë¡œí•„ë¡œ ê°€ì¥')">
        //                         ${data['sender_name']}
        //                     </div>
        //                 </div>
        //             </div>
        //             `
        //         document.getElementById('high-price').innerHTML = temp

        //         var temp = `
        //             <div>
        //                 <div>
        //                     <img width=20px; height=20px; src="/static/images/stady_bear_face.png" alt="">
        //                     <b style = "font-size : 20px">${data['sender_name']}</b>
        //                 </div>
        //                 <div style = "margin-left : 20px; width: 80%; font-size : 20px; border-radius : 8px; background-color : hotpink; padding : 5px; margin-bottom : 10px;">
        //                     ${data['high_price']} ì› ì…ì°°!!
        //                 </div>
        //             </div>
        //         `
        //         // beforeend afterbegin beforebegin afterend
        //         document.querySelector('#chat').insertAdjacentHTML('beforeend', temp)

        //     } else if (responseType === 'message') {
        //         var nowOner = HANDSUP['buyer_id']
        //         var seller = HANDSUP['seller_id']
        //         if (seller === data['sender']){
        //             var temp = `
        //             <div>
        //                 <div>
        //                     <img width=20px; height=20px; src="/static/images/stady_bear_face.png" alt="">
        //                     <b style = "font-size : 20px">${data['sender_name']} (íŒë§¤ì)</b> <span style="font-color : gray; font-size:small;">${data['time']}</span>
        //                 </div>
        //                 <div style = "margin-left : 20px; width: 80%; font-size : 18px; border-radius : 8px; background-color : #d7d7d7; padding : 5px; margin-bottom : 10px;">
        //                     ${data['message']}
        //                 </div>
        //             </div>
        //         `
        //         } else if ( nowOner === data['sender']){
        //             var temp = `
        //             <div>
        //                 <div>
        //                     <img width=20px; height=20px; src="/static/images/stady_bear_face.png" alt="">
        //                     <b style = "font-size : 20px">${data['sender_name']} </b> (í˜„ì¬ ìµœê³ ê°€ ì…ì°°ì) <span style="font-color : gray; font-size:small;">${data['time']}</span>
        //                 </div>
        //                 <div style = "margin-left : 20px; width: 80%; font-size : 18px; border-radius : 8px; background-color : #d7d7d7; padding : 5px; margin-bottom : 10px;">
        //                     ${data['message']}
        //                 </div>
        //             </div>
        //         `
        //         }else{
        //             var temp = `
        //             <div>
        //                 <div>
        //                     <img width=20px; height=20px; src="/static/images/stady_bear_face.png" alt="">
        //                     <b style = "font-size : 20px">${data['sender_name']}</b> <span style="font-color : gray; font-size:small;">${data['time']}</span>
        //                 </div>
        //                 <div style = "margin-left : 20px; width: 80%; font-size : 18px; border-radius : 8px; background-color : #d7d7d7; padding : 5px; margin-bottom : 10px;">
        //                     ${data['message']}
        //                 </div>
        //             </div>
        //         `
        //         }
                
        //         // beforeend afterbegin beforebegin afterend
        //         document.querySelector('#chat').insertAdjacentHTML('beforeend', temp)
        //     } else if( responseType === 'enter'){
        //         HANDSUP['participants_count'] = data['participants_count']
        //         localStorage.setItem('handsup', JSON.stringify(HANDSUP))
        //         var temp = `
        //             <div>
        //                 <div style = "margin-left : 20px; width: 80%; font-size : 18px; border-radius : 8px; background-color : #d7d7d7; padding : 5px; margin-bottom : 10px;">
        //                     ${data['sender_name']}ë‹˜ì´ ì…ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.
        //                 </div>
        //             </div>
        //         `
        //         document.querySelector('#chat').insertAdjacentHTML('beforeend', temp)
        //         document.getElementById('participants-count').innerText = 'ì°¸ì—¬ ì¸ì› : '+data['participants_count']
                
        //     } else if(responseType === 'out'){
        //         HANDSUP['participants_count'] = data['participants_count']
        //         localStorage.setItem('handsup', JSON.stringify(HANDSUP))
        //         document.getElementById('participants-count').innerText = 'ì°¸ì—¬ ì¸ì› : '+data['participants_count']


        //     }

        //     // í•˜ë‹¨ ìŠ¤í¬ë¡¤ ê³ ì •
        //     if (isEnd === true) {
        //         element.scrollTop = element.scrollHeight //- element.clientHeight
        //     }

        // };

        // chatSocket.onclose = function (e) {
        //     console.error('Chat socket closed unexpectedly');
        // };

        // document.querySelector('#chat-message-input').focus();
        // document.querySelector('#chat-message-input').onkeyup = function (e) {
        //     if (e.keyCode === 13) {  // enter, return
        //         sendMessage(false)
        //     }
        // };

        // function sendMessage() {
        //     var messageInputDom = document.querySelector('#chat-message-input');
        //     var message = messageInputDom.value;
        //     var element = document.getElementById('chat-wrap');
        //     if (message === '') {
        //         return
        //     }
        //     // console.log(HANDSUP, payload)
        //     if (chatSocket.readyState === WebSocket.OPEN) {
        //         chatSocket.send(JSON.stringify({
        //             'is_money': false,
        //             'goods_id': goodsId,
        //             'user_id': payload['user_id'],
        //             'message': message
        //         }))
        //     } else {
        //         setTimeout(sendMessage, 500)
        //     }
        //     messageInputDom.value = '';
        // };

        // function sendMoney() {
        //     var messageInputDom = document.querySelector('#chat-money-input');
        //     var message = messageInputDom.value;
        //     console.log(highPrice)
        //     // console.log(HANDSUP, payload)
        //     if (chatSocket.readyState === WebSocket.OPEN) {

        //         money = Number(message)
        //         console.log(money, typeof (money))
        //         // money === NaNì´ ì•ˆë¨¹íŒë‹¤.
        //         if (String(money) == 'NaN') {
        //             return alert('ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.')
        //         } else if (highPrice >= parseInt(money)) {
        //             return alert('í˜„ì¬ê°€ ë³´ë‹¤ ë‚®ì€ ê°€ê²©ì…ë‹ˆë‹¤.')
        //         } else {
        //             chatSocket.send(JSON.stringify({
        //                 'is_money': true,
        //                 'goods_id': goodsId,
        //                 'user_id': payload['user_id'],
        //                 'message': money
        //             }))
        //         }
        //     } else {
        //         setTimeout(sendMessage, 500)
        //     }

        //     messageInputDom.value = '';
        // };

    </script>
</body>

</html>